<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jardim Pixel Interativo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #1a1a2e;
            font-family: 'Courier New', monospace;
            color: #fff;
            overflow-x: hidden;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            width: 100%;
            text-align: center;
        }

        .header {
            margin-bottom: 20px;
        }

        h1 {
            color: #4ade80;
            font-size: 2.5rem;
            text-shadow: 0 0 10px rgba(74, 222, 128, 0.5);
            margin-bottom: 10px;
        }

        .subtitle {
            color: #86efac;
            font-size: 1.2rem;
            margin-bottom: 5px;
        }

        .instructions {
            color: #60a5fa;
            font-size: 0.9rem;
            margin-bottom: 20px;
        }

        .canvas-container {
            position: relative;
            margin: 0 auto 20px;
            border: 4px solid #4ade80;
            border-radius: 4px;
            overflow: hidden;
            background: #000;
        }

        canvas {
            display: block;
            cursor: crosshair;
            image-rendering: pixelated;
            image-rendering: crisp-edges;
            width: 100%;
            max-width: 800px;
            height: auto;
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin-bottom: 20px;
            background: rgba(30, 41, 59, 0.8);
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #374151;
        }

        button {
            background: #4ade80;
            color: #1a1a2e;
            border: none;
            padding: 12px 24px;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            font-size: 1rem;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        button:hover {
            background: #22c55e;
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.2);
        }

        .reset-btn {
            background: #ef4444;
        }

        .reset-btn:hover {
            background: #dc2626;
        }

        .speed-control {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        .speed-label {
            color: #86efac;
            font-weight: bold;
            font-size: 0.9rem;
        }

        input[type="range"] {
            width: 200px;
            height: 8px;
            -webkit-appearance: none;
            background: #374151;
            border-radius: 4px;
            outline: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: #4ade80;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 0 5px rgba(74, 222, 128, 0.5);
        }

        .stats {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 10px;
            color: #60a5fa;
            font-size: 0.9rem;
        }

        .stat-box {
            background: rgba(30, 41, 59, 0.8);
            padding: 10px 15px;
            border-radius: 6px;
            border: 1px solid #374151;
            min-width: 120px;
        }

        .feature-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 20px;
            color: #d1d5db;
        }

        .feature-item {
            background: rgba(30, 41, 59, 0.6);
            padding: 10px;
            border-radius: 4px;
            font-size: 0.85rem;
            border-left: 3px solid #4ade80;
        }

        .footer {
            margin-top: 20px;
            color: #9ca3af;
            font-size: 0.8rem;
            text-align: center;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            button {
                width: 100%;
                max-width: 250px;
            }
            
            .stats {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üåø JARDIM PIXEL INTERATIVO üåø</h1>
            <p class="subtitle">Estilo Doom '93 - Pixel Art Din√¢mico</p>
            <p class="instructions">Passe o mouse sobre a grama ‚Ä¢ Clique e arraste para criar vagalumes</p>
        </div>

        <div class="canvas-container">
            <canvas id="pixelGarden"></canvas>
        </div>

        <div class="controls">
            <button id="toggleBtn">‚è∏ PAUSAR</button>
            <button id="resetBtn" class="reset-btn">üîÑ RESETAR</button>
            
            <div class="speed-control">
                <span class="speed-label">VELOCIDADE: <span id="speedValue">1.0x</span></span>
                <input type="range" id="speedSlider" min="0.1" max="3" step="0.1" value="1">
            </div>
        </div>

        <div class="stats">
            <div class="stat-box">üå± Grama: <span id="grassCount">0</span></div>
            <div class="stat-box">üå∏ Flores: <span id="flowerCount">0</span></div>
            <div class="stat-box">‚ú® Vagalumes: <span id="fireflyCount">0</span></div>
        </div>

        <div class="feature-list">
            <div class="feature-item">‚Ä¢ Grama procedural com crescimento √∫nico</div>
            <div class="feature-item">‚Ä¢ Flores aparecem aleatoriamente</div>
            <div class="feature-item">‚Ä¢ Vagalumes azuis ao clicar e arrastar</div>
            <div class="feature-item">‚Ä¢ Intera√ß√£o completa com o mouse</div>
        </div>

        <div class="footer">
            <p>Desenvolvido com HTML5 Canvas ‚Ä¢ Estilo Pixel Art ‚Ä¢ Efeitos Din√¢micos</p>
        </div>
    </div>

    <script>
        // Configura√ß√µes principais
        const canvas = document.getElementById('pixelGarden');
        const ctx = canvas.getContext('2d');
        
        // Definir tamanho do canvas
        canvas.width = 800;
        canvas.height = 480;
        
        // Estado do jogo
        let isGrowing = true;
        let speed = 1;
        let mouseX = -100;
        let mouseY = -100;
        let isMouseDown = false;
        
        // Elementos da UI
        const toggleBtn = document.getElementById('toggleBtn');
        const resetBtn = document.getElementById('resetBtn');
        const speedSlider = document.getElementById('speedSlider');
        const speedValue = document.getElementById('speedValue');
        const grassCountEl = document.getElementById('grassCount');
        const flowerCountEl = document.getElementById('flowerCount');
        const fireflyCountEl = document.getElementById('fireflyCount');
        
        // Paletas de cores
        const grassColors = [
            '#1a4d2e', '#2d5a3d', '#3d6b4a', '#4d7c5b',
            '#5d8d6c', '#6d9e7d', '#7daf8e'
        ];
        
        const flowerColors = [
            '#ff4444', '#ff6b6b', '#ffaa44', '#ffdd44',
            '#ff44aa', '#aa44ff', '#4444ff'
        ];
        
        // Grid de grama
        const gridSize = 4;
        const cols = Math.floor(canvas.width / gridSize);
        const rows = Math.floor(canvas.height / gridSize);
        let grass = [];
        let flowers = [];
        let fireflies = [];
        
        // Inicializa√ß√£o
        function init() {
            initGrass();
            initUIEvents();
            requestAnimationFrame(update);
        }
        
        function initGrass() {
            grass = [];
            for (let x = 0; x < cols; x++) {
                grass[x] = [];
                for (let y = 0; y < rows; y++) {
                    grass[x][y] = {
                        height: Math.random() * 3,
                        maxHeight: 8 + Math.random() * 12,
                        growthRate: 0.02 + Math.random() * 0.03,
                        color: grassColors[Math.floor(Math.random() * grassColors.length)],
                        swayOffset: Math.random() * Math.PI * 2,
                        swaySpeed: 0.02 + Math.random() * 0.03,
                        mouseSway: 0,
                        mouseSwayDecay: 0.9 + Math.random() * 0.08
                    };
                }
            }
            
            flowers = [];
            fireflies = [];
        }
        
        function initUIEvents() {
            // Bot√µes
            toggleBtn.addEventListener('click', () => {
                isGrowing = !isGrowing;
                toggleBtn.textContent = isGrowing ? '‚è∏ PAUSAR' : '‚ñ∂ CONTINUAR';
            });
            
            resetBtn.addEventListener('click', () => {
                isGrowing = false;
                setTimeout(() => {
                    initGrass();
                    isGrowing = true;
                    toggleBtn.textContent = '‚è∏ PAUSAR';
                }, 100);
            });
            
            // Slider de velocidade
            speedSlider.addEventListener('input', (e) => {
                speed = parseFloat(e.target.value);
                speedValue.textContent = speed.toFixed(1) + 'x';
            });
            
            // Eventos do mouse
            canvas.addEventListener('mousemove', (e) => {
                const rect = canvas.getBoundingClientRect();
                mouseX = e.clientX - rect.left;
                mouseY = e.clientY - rect.top;
                processMouseInteraction();
            });
            
            canvas.addEventListener('mousedown', (e) => {
                if (e.button === 0) {
                    isMouseDown = true;
                }
            });
            
            canvas.addEventListener('mouseup', (e) => {
                if (e.button === 0) {
                    isMouseDown = false;
                }
            });
            
            canvas.addEventListener('mouseleave', () => {
                mouseX = -100;
                mouseY = -100;
                isMouseDown = false;
            });
            
            // Toque para dispositivos m√≥veis
            canvas.addEventListener('touchmove', (e) => {
                e.preventDefault();
                const rect = canvas.getBoundingClientRect();
                mouseX = e.touches[0].clientX - rect.left;
                mouseY = e.touches[0].clientY - rect.top;
                processMouseInteraction();
            }, { passive: false });
            
            canvas.addEventListener('touchstart', (e) => {
                e.preventDefault();
                isMouseDown = true;
            });
            
            canvas.addEventListener('touchend', (e) => {
                e.preventDefault();
                isMouseDown = false;
            });
        }
        
        function processMouseInteraction() {
            // Converter posi√ß√£o do mouse para coordenadas da grid
            const gridX = Math.floor(mouseX / gridSize);
            const gridY = Math.floor(mouseY / gridSize);
            
            // Raio de influ√™ncia do mouse
            const influenceRadius = 5;
            
            // Aplicar efeito de movimento na grama
            for (let dx = -influenceRadius; dx <= influenceRadius; dx++) {
                for (let dy = -influenceRadius; dy <= influenceRadius; dy++) {
                    const x = gridX + dx;
                    const y = gridY + dy;
                    
                    if (x >= 0 && x < cols && y >= 0 && y < rows) {
                        const distance = Math.sqrt(dx * dx + dy * dy);
                        if (distance <= influenceRadius) {
                            const intensity = (1 - distance / influenceRadius) * 8;
                            grass[x][y].mouseSway = Math.max(
                                grass[x][y].mouseSway,
                                intensity * 0.7
                            );
                        }
                    }
                }
            }
            
            // Criar vagalumes se o mouse estiver pressionado
            if (isMouseDown && Math.random() > 0.7) {
                for (let i = 0; i < 2; i++) {
                    createFirefly();
                }
            }
        }
        
        function createFlower() {
            if (Math.random() > 0.98 && flowers.length < 50) {
                flowers.push({
                    x: Math.random() * cols,
                    y: Math.random() * rows,
                    height: 0,
                    maxHeight: 15 + Math.random() * 10,
                    growthRate: 0.05 + Math.random() * 0.05,
                    petalColor: flowerColors[Math.floor(Math.random() * flowerColors.length)],
                    centerColor: '#ffdd44',
                    petalSize: 2 + Math.random() * 2,
                    rotation: Math.random() * Math.PI * 2,
                    rotationSpeed: (Math.random() - 0.5) * 0.02
                });
            }
        }
        
        function createFirefly() {
            const angle = Math.random() * Math.PI * 2;
            const flySpeed = 1 + Math.random() * 2;
            
            fireflies.push({
                x: mouseX + (Math.random() - 0.5) * 20,
                y: mouseY + (Math.random() - 0.5) * 20,
                vx: Math.cos(angle) * flySpeed,
                vy: Math.sin(angle) * flySpeed,
                size: 1 + Math.random() * 2,
                color: '#66ccff',
                alpha: 0.7 + Math.random() * 0.3,
                pulseSpeed: 3 + Math.random() * 4,
                life: 100 + Math.random() * 50,
                trail: []
            });
        }
        
        let time = 0;
        
        function update() {
            // Limpar canvas
            ctx.fillStyle = '#2a1810';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Textura do solo
            for (let i = 0; i < 300; i++) {
                ctx.fillStyle = `rgba(60, 40, 30, ${Math.random() * 0.3})`;
                ctx.fillRect(
                    Math.random() * canvas.width,
                    Math.random() * canvas.height,
                    1, 1
                );
            }
            
            time += 0.016 * speed;
            
            // Atualizar e desenhar grama
            let activeGrass = 0;
            for (let x = 0; x < cols; x++) {
                for (let y = 0; y < rows; y++) {
                    const cell = grass[x][y];
                    
                    // Crescimento
                    if (isGrowing && cell.height < cell.maxHeight) {
                        cell.height += cell.growthRate * speed;
                    }
                    
                    // Decaimento do movimento do mouse
                    cell.mouseSway *= cell.mouseSwayDecay;
                    if (Math.abs(cell.mouseSway) < 0.1) cell.mouseSway = 0;
                    
                    if (cell.height > 0) {
                        activeGrass++;
                        const baseSway = Math.sin(time * cell.swaySpeed + cell.swayOffset) * 2;
                        const totalSway = baseSway + cell.mouseSway;
                        const baseX = x * gridSize;
                        const baseY = y * gridSize;
                        
                        // Verificar se est√° sob o mouse
                        const isUnderMouse = (
                            Math.abs(x - Math.floor(mouseX / gridSize)) <= 2 &&
                            Math.abs(y - Math.floor(mouseY / gridSize)) <= 2
                        );
                        
                        // Desenhar grama
                        for (let h = 0; h < Math.floor(cell.height); h++) {
                            const segmentY = baseY - h;
                            const segmentSway = (h / cell.height) * totalSway;
                            
                            let colorIndex = Math.min(
                                Math.floor((h / cell.maxHeight) * grassColors.length),
                                grassColors.length - 1
                            );
                            
                            let color = grassColors[colorIndex];
                            
                            // Brilho quando sob o mouse
                            if (isUnderMouse && h > cell.height * 0.7) {
                                color = lightenColor(color, 50);
                            }
                            
                            ctx.fillStyle = color;
                            ctx.fillRect(baseX + segmentSway, segmentY, gridSize, 1);
                        }
                    }
                }
            }
            
            // Atualizar e desenhar flores
            flowers.forEach((flower, index) => {
                if (isGrowing && flower.height < flower.maxHeight) {
                    flower.height += flower.growthRate * speed;
                }
                
                if (flower.height > 5) {
                    const baseX = flower.x * gridSize;
                    const baseY = flower.y * gridSize;
                    
                    // Caule
                    for (let h = 0; h < Math.floor(flower.height); h++) {
                        ctx.fillStyle = '#2d5a3d';
                        ctx.fillRect(baseX, baseY - h, 2, 1);
                    }
                    
                    // P√©talas
                    if (flower.height >= flower.maxHeight * 0.8) {
                        flower.rotation += flower.rotationSpeed;
                        const flowerTop = baseY - Math.floor(flower.height);
                        
                        // P√©talas
                        for (let i = 0; i < 8; i++) {
                            const angle = (Math.PI * 2 * i) / 8 + flower.rotation;
                            const petalX = baseX + Math.cos(angle) * flower.petalSize * 2;
                            const petalY = flowerTop + Math.sin(angle) * flower.petalSize * 2;
                            
                            ctx.fillStyle = flower.petalColor;
                            ctx.fillRect(
                                Math.floor(petalX),
                                Math.floor(petalY),
                                Math.ceil(flower.petalSize),
                                Math.ceil(flower.petalSize)
                            );
                        }
                        
                        // Centro
                        ctx.fillStyle = flower.centerColor;
                        ctx.fillRect(baseX - 1, flowerTop - 1, 3, 3);
                    }
                }
            });
            
            // Atualizar e desenhar vagalumes
            fireflies.forEach((firefly, index) => {
                // Atualizar posi√ß√£o
                firefly.x += firefly.vx * speed;
                firefly.y += firefly.vy * speed;
                firefly.life -= speed;
                
                // Rastro
                firefly.trail.push({ x: firefly.x, y: firefly.y });
                if (firefly.trail.length > 10) {
                    firefly.trail.shift();
                }
                
                // Pulsa√ß√£o
                const pulse = Math.sin(time * firefly.pulseSpeed) * 0.3 + 0.7;
                
                // Desenhar rastro
                firefly.trail.forEach((point, i) => {
                    const alpha = (i / firefly.trail.length) * firefly.alpha * 0.5;
                    ctx.fillStyle = `rgba(102, 204, 255, ${alpha})`;
                    ctx.fillRect(point.x, point.y, 1, 1);
                });
                
                // Desenhar vagalume
                ctx.fillStyle = `rgba(102, 204, 255, ${firefly.alpha * pulse})`;
                ctx.fillRect(
                    firefly.x - firefly.size / 2,
                    firefly.y - firefly.size / 2,
                    firefly.size,
                    firefly.size
                );
                
                // Remover se fora da tela ou sem vida
                if (firefly.life <= 0 || 
                    firefly.x < 0 || firefly.x > canvas.width || 
                    firefly.y < 0 || firefly.y > canvas.height) {
                    fireflies.splice(index, 1);
                }
            });
            
            // Criar novas flores
            if (isGrowing) {
                createFlower();
            }
            
            // Atualizar estat√≠sticas
            grassCountEl.textContent = activeGrass;
            flowerCountEl.textContent = flowers.length;
            fireflyCountEl.textContent = fireflies.length;
            
            // Continuar o loop de anima√ß√£o
            requestAnimationFrame(update);
        }
        
        // Fun√ß√£o utilit√°ria para clarear cores
        function lightenColor(color, amount) {
            const hex = color.replace('#', '');
            const num = parseInt(hex, 16);
            const r = Math.min(255, (num >> 16) + amount);
            const g = Math.min(255, ((num >> 8) & 0x00FF) + amount);
            const b = Math.min(255, (num & 0x0000FF) + amount);
            return `rgb(${r}, ${g}, ${b})`;
        }
        
        // Inicializar o jardim
        init();
    </script>
</body>
</html>
